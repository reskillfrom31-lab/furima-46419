# Nginx設定確認とアプリケーション動作確認ガイド

このディレクトリには、Nginx設定とアプリケーション動作確認に関するガイドが含まれています。

## 📚 ガイド一覧

### 1. [詳細ガイド](nginx_application_check_guide.md)
**初心者の方でも丁寧に説明された完全版ガイド**
- SSH接続方法
- Unicorn動作確認
- Nginx設定確認
- ログの確認方法
- トラブルシューティング
- よくある質問（FAQ）

👉 **初めて確認作業を行う方は、まずこちらを読んでください**

---

### 2. [クイックリファレンス](quick_reference.md)
**よく使うコマンドを素早く確認できるリファレンス**
- 基本確認コマンド
- ログ確認コマンド
- 再起動コマンド
- よくあるトラブルと解決方法
- 動作確認チェックリスト

👉 **慣れてきたら、こちらを参照すると効率的です**

---

### 3. [Nginx設定ファイル例](nginx_config_example.conf)
**Nginx設定ファイルのテンプレート**
- 設定ファイルの構造
- 重要な設定項目の説明
- コメント付きで分かりやすい

👉 **Nginx設定を確認・編集する際の参考にしてください**

---

### 4. [クイックチェックスクリプト](quick_check_commands.sh)
**自動で状態確認ができる便利なスクリプト**
- Unicornの動作確認
- Nginxの動作確認
- ログの最新エラー確認
- ディレクトリの存在確認

👉 **サーバーにアップロードして実行すると、一括で確認できます**

---

## 🚀 はじめに読むべき順序

### 初心者の方
1. [詳細ガイド](nginx_application_check_guide.md) を最初から最後まで読む
2. 実際に手順を実行しながら確認作業を行う
3. 慣れてきたら [クイックリファレンス](quick_reference.md) を使う

### ある程度経験がある方
1. [クイックリファレンス](quick_reference.md) で必要なコマンドを確認
2. 必要に応じて [詳細ガイド](nginx_application_check_guide.md) を参照
3. トラブルが発生したら、トラブルシューティングセクションを確認

---

## ⚡ よく使う確認作業の流れ

### デプロイ後の基本確認

```bash
# 1. サーバーに接続
ssh -i ~/.ssh/my-key-pair.pem ec2-user@3.115.160.151

# 2. Unicornが起動しているか確認
ps aux | grep unicorn

# 3. Nginxが起動しているか確認
sudo systemctl status nginx

# 4. エラーログを確認
tail -20 /var/www/furima-46419/shared/log/unicorn.stderr.log
tail -20 /var/www/furima-46419/shared/log/production.log

# 5. ブラウザでアクセスして動作確認
# http://3.115.160.151
```

---

## 📋 チェックリスト

デプロイ後は、以下の項目を確認してください：

### 必須確認項目
- [ ] Unicornプロセスが起動している
- [ ] Unicornソケットファイルが存在する
- [ ] Nginxが起動している
- [ ] Nginx設定に構文エラーがない
- [ ] ブラウザでアプリケーションにアクセスできる
- [ ] エラーログに重大なエラーがない

### 推奨確認項目
- [ ] アプリケーションの主要機能が動作する
- [ ] CSSやJavaScriptが正しく読み込まれる
- [ ] 画像が正しく表示される
- [ ] ログに異常なエラーが記録されていない

---

## 🔧 トラブルシューティング

### 問題が発生した場合

1. **まずエラーログを確認**
   - Unicornエラーログ: `/var/www/furima-46419/shared/log/unicorn.stderr.log`
   - Railsアプリログ: `/var/www/furima-46419/shared/log/production.log`
   - Nginxエラーログ: `/var/log/nginx/error.log`

2. **詳細ガイドのトラブルシューティングセクションを参照**
   - [詳細ガイド - ステップ7: トラブルシューティング](nginx_application_check_guide.md#ステップ7-トラブルシューティング)

3. **クイックリファレンスのよくあるトラブルセクションを参照**
   - [クイックリファレンス - よくあるトラブルと解決方法](quick_reference.md#よくあるトラブルと解決方法)

---

## 📞 サポート

### 各ガイドの詳細セクション

- **詳細ガイド**: 各ステップに詳細な説明があります
- **クイックリファレンス**: よくある質問と回答があります
- **Nginx設定例**: 設定ファイルの構造が分かります

### 確認できない場合

1. エラーメッセージをコピーして保存
2. 関連するログファイルの内容を確認
3. 実行したコマンドとその結果を記録

---

## 📝 更新履歴

- 初版作成: Nginx設定確認とアプリケーション動作確認ガイド一式

---

## ✅ 次のステップ

確認作業が完了したら：

1. アプリケーションの機能テストを行う
2. パフォーマンスを確認する
3. セキュリティ設定を確認する
4. 定期的なログ監視を設定する

---

**💡 ヒント**: このドキュメントは初心者の方でも理解できるように作成されています。分からないことがあれば、遠慮なく詳細ガイドを参照してください。

